<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content"><channel><title>Blog</title><description></description><link>https://your-website-url.com</link><language>en</language><lastBuildDate>Thu, 18 Feb 2021 11:42:30 +0800</lastBuildDate><pubDate>Thu, 18 Feb 2021 11:42:30 +0800</pubDate><ttl>250</ttl><atom:link href="https://your-website-url.com/feed.rss" rel="self" type="application/rss+xml"/><item><guid isPermaLink="true">https://your-website-url.com/posts/swift-property-wrapper</guid><title>Swiftè¯­è¨€ç‰¹æ€§ä¹‹-PropertyWrapper</title><description>ä»€ä¹ˆæ˜¯ PropertyWrapperï¼ŸPropertyWrapperèƒ½ç»™æˆ‘ä»¬çš„ä»£ç å¸¦æ¥å“ªäº›å¥½å¤„å‘¢ï¼Œå¸Œæœ›çœ‹å®Œä¹‹åèƒ½å¸¦ç»™ä½ ç­”æ¡ˆ</description><link>https://your-website-url.com/posts/swift-property-wrapper</link><pubDate>Wed, 13 Jan 2021 22:13:00 +0800</pubDate><content:encoded><![CDATA[<h1>Swiftè¯­è¨€ç‰¹æ€§ä¹‹-PropertyWrapper</h1><p><code>PropertyWrapper</code>æ˜¯<code>Swift5.1</code>ç‰ˆæœ¬å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å±æ€§çš„åŒ…è£…å™¨ã€‚ä¸ºä»€ä¹ˆè¦åŒ…è£…å±æ€§å‘¢ï¼Ÿå› ä¸ºæœ‰æ—¶å€™éœ€è¦å¯¹å±æ€§è¿›è¡Œé€»è¾‘å¤„ç†</p><h2>æ¡ˆä¾‹</h2><p>Appçš„è®¾ç½®é€‰é¡¹é‡Œé¢é€šå¸¸æœ‰è¯­è¨€è®¾ç½®ã€ä¸»é¢˜è®¾ç½®ã€å­—ä½“è®¾ç½®ç­‰ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬ä¼šå®šä¹‰ä¸€ä¸ªç±»æ¥ä¸“é—¨è¿›è¡Œç®¡ç†ï¼ŒåŒæ—¶ä¸ºäº†ä¿è¯æ¯æ¬¡å¯åŠ¨Appéƒ½èƒ½è®°å½•ä¹‹å‰çš„è®¾ç½®ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€šè¿‡<code>UserDefaults</code>æ¥è¿›è¡ŒæŒä¹…åŒ–å¤„ç†ï¼Œä»£ç å¦‚ä¸‹</p><pre><code><span class="keyword">let</span> kSettingsLanguage = <span class="string">"kSettingsLanguage"</span>
<span class="keyword">let</span> kSettingsFontsize = <span class="string">"kSettingsFontsize"</span>
<span class="keyword">let</span> kSettingsTheme = <span class="string">"kSettingsTheme"</span>

<span class="comment">// æ³¨æ„âš ï¸ ï¼šset æ–¹æ³•æ²¡æœ‰å¯¹ nil è¿›è¡Œåˆ¤æ–­ï¼Œæœ‰é£é™©ï¼Œæ–‡ç« æœ€åä¼šè®²åˆ°è§£å†³åŠæ³•</span>

<span class="keyword">public class</span> GlobalSettings {
    <span class="comment">//å½“å‰è¯­è¨€</span>
    <span class="keyword">public static var</span> language: <span class="type">String</span>? {
        <span class="keyword">get</span> {
            <span class="keyword">return</span> <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">object</span>(forKey: kSettingsLanguage) <span class="keyword">as</span>? <span class="type">String</span>
        }
        <span class="keyword">set</span> {
            <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">set</span>(newValue, forKey: kSettingsLanguage)
        }
    }
    <span class="comment">//å½“å‰å­—å·</span>
    <span class="keyword">public static var</span> fontSize: <span class="type">Int</span>? {
        <span class="keyword">get</span> {
            <span class="keyword">return</span> <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">object</span>(forKey: kSettingsFontsize) <span class="keyword">as</span>? <span class="type">Int</span>
        }
        <span class="keyword">set</span> {
            <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">set</span>(newValue, forKey: kSettingsFontsize)
        }
    }
    <span class="comment">//å½“å‰ä¸»é¢˜</span>
    <span class="keyword">public static var</span> theme: <span class="type">String</span>? {
        <span class="keyword">get</span> {
            <span class="keyword">return</span> <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">object</span>(forKey: kSettingsTheme) <span class="keyword">as</span>? <span class="type">String</span>
        } <span class="keyword">set</span> {
            <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">set</span>(newValue, forKey: kSettingsTheme)
        }
    }
}
</code></pre><h2>æŠ›å‡ºé—®é¢˜</h2><p>çœ‹èµ·æ¥ä¸é”™ï¼Œä½†æˆ‘ä»¬ä»”ç»†è§‚å¯Ÿä¼šå‘ç°ï¼Œæˆ‘ä»¬çš„æ¯ä¸ªå±æ€§é‡Œçš„<code>get set</code>æ–¹æ³•ï¼Œé€»è¾‘éƒ½éå¸¸ç±»ä¼¼ï¼Œå¦‚æœåé¢å¢åŠ äº†æ–°çš„å±æ€§ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯ copy ä¸Šé¢çš„æŸä¸ªå±æ€§çš„ get set æ–¹æ³•ï¼Œç„¶åæ”¹ä¸€ä¸‹å±æ€§åç§°ä»¥åŠå¯¹åº”çš„keyï¼Œéšç€å±æ€§çš„å¢å¤šï¼Œå°±ä¼šæœ‰å¤§é‡çš„é€»è¾‘ç›¸ä¼¼çš„ä»£ç ï¼ŒåŒæ—¶å¯ç»´æŠ¤æ€§ä¼šå˜å·®ï¼Œå¦‚æœå°†æ¥æƒ³æ¢ä¸€ç§æŒä¹…åŒ–çš„æ–¹æ³•ï¼Œè¿™å°†æ˜¯ä¸€åœºç¾éš¾ã€‚</p><h2>è§£å†³æ–¹æ¡ˆ</h2><p>é‚£æœ‰ä»€ä¹ˆåŠæ³•èƒ½è¿›è¡Œä¼˜åŒ–å—ï¼Ÿæ²¡é”™ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è®²çš„ä¸»é¢˜</p><p>ä½¿ç”¨<code>propertyWrapper</code>é¦–å…ˆéœ€è¦é€šè¿‡<code>@propertyWrapper</code>è¿›è¡Œå£°æ˜ï¼ŒåŒæ—¶æˆ‘ä»¬éœ€è¦æŠŠé€»è¾‘ç›¸ä¼¼çš„ä»£ç è¿›è¡ŒæŠ½è±¡ï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ¯ä¸ª<code>set get</code>æ–¹æ³•æœ‰ä¸¤ä¸ªå·®å¼‚ç‚¹</p><p>1ã€<code>key</code>ä¸ä¸€æ ·</p><p>2ã€å±æ€§ç±»å‹ä¸ä¸€æ ·</p><p>å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p><p>1ã€<code>key</code>ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ key æŠ½è±¡ä¸º<code>propertyWrapper</code>çš„ä¸€ä¸ªå±æ€§</p><p>2ã€å±æ€§ç±»å‹ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥æ³›å‹</p><p>ä»£ç å¦‚ä¸‹</p><pre><code><span class="keyword">@propertyWrapper struct</span> UserDefaultWrapper&lt;T&gt; {
    <span class="keyword">var</span> key: <span class="type">String</span>
    <span class="comment">// wrappedValue é‡Œçš„é€»è¾‘å³ä¸ºä¸Šé¢ä»£ç ä¸­ï¼Œæ¯ä¸ªå±æ€§é‡Œçš„é€»è¾‘</span>
    <span class="keyword">var</span> wrappedValue: <span class="type">T</span>? {
        <span class="keyword">get</span> {
            <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">object</span>(forKey: key) <span class="keyword">as</span>? <span class="type">T</span>
        }
        <span class="keyword">set</span> {
            <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">setValue</span>(newValue, forKey: key)
        }
    }
}
</code></pre><p>æˆ‘ä»¬å®šä¹‰äº†<code>UserDefaultWrapper</code>ï¼Œå…¶ä¸­<code>wrappedValue</code>å°±æ˜¯æˆ‘ä»¬è¦åŒ…è£…çš„å±æ€§å€¼ï¼Œæˆ‘ä»¬æŠŠé€»è¾‘å·²ç»æŠ½è±¡åˆ°äº† <code>UserDefaultWrapper</code>é‡Œï¼Œå¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿä»£ç å¦‚ä¸‹</p><pre><code><span class="keyword">struct</span> GlobalSettings {
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsLanguage) <span class="keyword">static var</span> language: <span class="type">String</span>?
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsFontsize) <span class="keyword">static var</span> fontSize: <span class="type">Int</span>?
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsTheme) <span class="keyword">static var</span> theme: <span class="type">String</span>?
}
</code></pre><p>ä»£ç æ˜¯ä¸æ˜¯ç¬é—´å˜çš„æ¸…çˆ½äº†ï¼Œåˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬çš„ä¸»é¢˜åŸºæœ¬ä¸Šå°±è®²å®Œäº†ï¼Œåé¢éƒ¨åˆ†æ˜¯ä»£ç çš„ä¼˜åŒ–</p><p>å±æ€§ä¸º<code>Optional</code>ç±»å‹ï¼Œä½¿ç”¨æ—¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºä¸€æ—¦æ²¡æœ‰å–åˆ°å€¼ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥å°†<code>wrapperValue</code>çš„ç±»å‹æ”¹ä¸º<code>T</code>ï¼ŒåŒæ—¶åœ¨<code>get</code>æ–¹æ³•é‡Œæä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¼•å…¥<code>defaultValue</code>å±æ€§ï¼Œä»£ç å¦‚ä¸‹</p><pre><code><span class="keyword">@propertyWrapper struct</span> UserDefaultWrapper&lt;T&gt; {
    <span class="keyword">var</span> key: <span class="type">String</span>
    <span class="keyword">var</span> defaultValue: <span class="type">T</span>
    <span class="keyword">var</span> wrappedValue: <span class="type">T</span> {
        <span class="keyword">get</span> {
            <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">object</span>(forKey: key) <span class="keyword">as</span>? <span class="type">T</span> ?? defaultValue
        }
        <span class="keyword">set</span> {
            <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">setValue</span>(newValue, forKey: key)
        }
    }
}
</code></pre><p>è¿™æ ·æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶ï¼Œå°±å¯ä»¥è¿™æ ·ï¼Œä»£ç å¦‚ä¸‹</p><pre><code><span class="keyword">struct</span> GlobalSettings {
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsLanguage, defaultValue:<span class="string">"zh"</span>) <span class="keyword">static var</span> language: <span class="type">String</span>
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsFontsize, defaultValue:<span class="number">16</span>) <span class="keyword">static var</span> fontSize: <span class="type">Int</span>
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsTheme, defaultValue:<span class="string">"light"</span>) <span class="keyword">static var</span> theme: <span class="type">String</span>
}
</code></pre><p>æˆ‘ä»¬æƒ³ä¸€æƒ³åˆ°è¿™é‡Œè¿˜æœ‰é—®é¢˜å—ï¼ŸğŸ¤”</p><p>è™½ç„¶æˆ‘ä»¬å®šä¹‰äº†æ³›å‹<code>T</code>ï¼Œä½†è¯·æ³¨æ„<code>T</code>å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œä¹ŸåŒ…æ‹¬å¯é€‰å‹ï¼Œæ¯”å¦‚</p><pre><code><span class="comment">//æ³¨æ„âš ï¸ è¿™é‡Œé¢çš„languageè¢«å®šä¹‰ä¸ºäº†Optinal</span> 
<span class="keyword">struct</span> GlobalSettings {
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsLanguage, defaultValue:<span class="string">"zh"</span>) <span class="keyword">static var</span> language: <span class="type">String</span>?
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsFontsize, defaultValue:<span class="number">16</span>) <span class="keyword">static var</span> fontSize: <span class="type">Int</span>
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsTheme, defaultValue:<span class="string">"light"</span>) <span class="keyword">static var</span> theme: <span class="type">String</span>
} 
</code></pre><p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åœ¨ä»£ç é‡Œè®¾ç½®çš„<code>defaultValue</code>æ˜¯å¤šä½™çš„ï¼Œå› ä¸ºä¸è®ºæŠŠ<code>defaultValue</code>è®¾ç½®ä¸ºä½•å€¼ï¼Œæˆ‘ä»¬é»˜è®¤å–åˆ°çš„éƒ½æ˜¯ nilï¼Œè¿™ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå› ä¸º<code>T</code> æ˜¯<code>Optional</code>ï¼Œæ‰€ä»¥<code>UserDefaults.standard.object(forKey: key) as? T ?? defaultValue</code>æ°¸è¿œä¹Ÿä¸ä¼šèµ°åˆ° <code>?? defaultValue</code></p><p>é‚£æœ‰æ²¡æœ‰åŠæ³•æŠŠ<code>defaultValue</code>å‚æ•°å»æ‰å‘¢ï¼Ÿ</p><p>é€šè¿‡<code>ExpressibleByNilLiteral</code>ï¼Œè¯¥åè®®è¡¨ç¤ºå¯ä»¥ç”¨<code>nil</code>æ¥åˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹ï¼Œè€Œ<code>Optional</code>éµå®ˆäº†<code>ExpressibleByNilLiteral</code></p><pre><code><span class="keyword">extension</span> <span class="type">UserDefaultWrapper</span> <span class="keyword">where</span> <span class="type">T</span>: <span class="type">ExpressibleByNilLiteral</span>{
    <span class="keyword">init</span>(key: <span class="type">String</span>){
        <span class="keyword">self</span>.<span class="keyword">init</span>(key: key, defaultValue: <span class="keyword">nil</span>)
    }
}
</code></pre><p>è¿™æ ·å°±å¯ä»¥è®¾ç½®äº†</p><pre><code><span class="keyword">struct</span> GlobalSettings {
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsLanguage) <span class="keyword">static var</span> language: <span class="type">String</span>?
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsFontsize, defaultValue:<span class="number">16</span>) <span class="keyword">static var</span> fontSize: <span class="type">Int</span>
    <span class="keyword">@UserDefaultWrapper</span>(key: kSettingsTheme, defaultValue:<span class="string">"light"</span>) <span class="keyword">static var</span> theme: <span class="type">String</span>
} 
</code></pre><p>è¿˜æœ‰å…¶ä»–é—®é¢˜å—ï¼Ÿæ˜¯çš„ï¼Œå¦‚æœç»™ language è®¾ç½®ä¸ºnilï¼Œä¼šcrash âŒ ï¼Œæ‰€ä»¥éœ€è¦å¯¹<code>set</code>æ–¹æ³•è¿›è¡Œ nil åˆ¤æ–­ï¼Œç›´æ¥ä¸Šä»£ç </p><pre><code><span class="keyword">@propertyWrapper struct</span> UserDefaultWrapper&lt;T&gt; {
    <span class="keyword">var</span> key: <span class="type">String</span>
    <span class="keyword">var</span> defaultValue: <span class="type">T</span>
    <span class="keyword">var</span> wrappedValue: <span class="type">T</span> {
        <span class="keyword">get</span> {
            <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">object</span>(forKey: key) <span class="keyword">as</span>? <span class="type">T</span> ?? defaultValue
        }
        <span class="keyword">set</span> {
        <span class="comment">//âš ï¸ Comparing non-optinal value of type 'T' to 'nil' always returns false</span>
            <span class="keyword">if</span> newValue == <span class="keyword">nil</span> {
                <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">removeObject</span>(forKey: key)
            }<span class="keyword">else</span> {
                <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">setValue</span>(newValue, forKey: key)
            }
        }
    }
}
</code></pre><p>ç°å®ç»™äº†ä¸€è®°å“äº®çš„è€³å…‰ï¼Œè¿™ä¸ªåˆ¤æ–­æ²¡æœ‰é¸Ÿç”¨ï¼Œç¼–è¯‘å™¨è®¤ä¸º<code>newValue</code>ä¸ä¼šæ˜¯nilï¼Œæ‰€ä»¥ <code>newValue == nil</code> æ°¸è¿œä¸æ»¡è¶³ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ¢ä¸€ä¸ªæ€è·¯</p><pre><code><span class="comment">//æˆ‘ä»¬å£°æ˜ä¸€ä¸ªåè®®</span>
<span class="keyword">private protocol</span> AnyOptional {
    <span class="keyword">var</span> isNil: <span class="type">Bool</span> { <span class="keyword">get</span> }
}
<span class="comment">//è®© Optional å®ç°è¿™ä¸ªåè®®</span>
<span class="keyword">extension</span> <span class="type">Optional</span>: <span class="type">AnyOptional</span> {
    <span class="keyword">var</span> isNil: <span class="type">Bool</span> {
        <span class="keyword">self</span> == <span class="keyword">nil</span>
    }
}

<span class="keyword">@propertyWrapper struct</span> UserDefaultWrapper&lt;T&gt; {
    <span class="keyword">let</span> key: <span class="type">String</span>
    <span class="keyword">let</span> defaultValue: <span class="type">T</span>    
    <span class="keyword">var</span> wrappedValue: <span class="type">T</span> {
        <span class="keyword">get</span> {
            <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">value</span>(forKey: key) <span class="keyword">as</span>? <span class="type">T</span> ?? defaultValue
        }
        <span class="keyword">set</span> {
            <span class="keyword">if let</span> optional = newValue <span class="keyword">as</span>? <span class="type">AnyOptional</span>, optional.<span class="property">isNil</span> {
                <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">removeObject</span>(forKey: key)
            } <span class="keyword">else</span> {
                <span class="type">UserDefaults</span>.<span class="property">standard</span>.<span class="call">setValue</span>(newValue, forKey: key)
            }
        }
    }
} 
</code></pre><p>å£°æ˜ä¸€ä¸ªåŒ…å«æœ‰<code>isNil</code>çš„åè®®ï¼Œå¹¶è®©<code>Optional</code>å®ç°è¿™ä¸ªåè®®ï¼Œé€šè¿‡<code>if let optional = newValue as? AnyOptional</code>æ¥é—´æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯<code>Optional</code>ï¼Œç„¶åé€šè¿‡<code>optional.isNil</code>æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯nil</p><p>åˆ°è¿™é‡Œæˆ‘ä»¬ç»ˆäºæŠŠé‡åˆ°çš„é—®é¢˜éƒ½è§£å†³äº†ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©</p><h2>å‚è€ƒé“¾æ¥</h2><p><a href="https://www.swiftbysundell.com/articles/property-wrappers-in-swift/">https://www.swiftbysundell.com/articles/property-wrappers-in-swift/</a><br><a href="https://www.avanderlee.com/swift/property-wrappers/">https://www.avanderlee.com/swift/property-wrappers/</a></p>]]></content:encoded></item><item><guid isPermaLink="true">https://your-website-url.com/posts/website-use-publish</guid><title>ä½¿ç”¨ Publish æ­å»ºé™æ€åšå®¢</title><description>ç°åœ¨é™æ€ç½‘ç«™ç”Ÿæˆæ¡†æ¶ç™¾èŠ±é½æ”¾ï¼Œç¬”è€…å…ˆåå°è¯•è¿‡JekyII hexo hugo vuepressï¼Œè€Œç°åœ¨æˆ‘å¼€å§‹ä½¿ç”¨ä¸€ä¸ªå…¨æ–°æ¡†æ¶ Publishï¼Œå½“ç„¶è¿™æ¬¡ä¸æ˜¯ä¸ºäº†ä¸€æ—¶å…´èµ·ï¼Œæ˜¯ä»€ä¹ˆåŸå› è®©æˆ‘è½¬å¤´Publishæ€€æŠ±ï¼Œæœ¬ç¯‡æ–‡ç« ç»™ä½ ç­”æ¡ˆ.</description><link>https://your-website-url.com/posts/website-use-publish</link><pubDate>Wed, 13 Jan 2021 22:13:00 +0800</pubDate><content:encoded><![CDATA[<h1>ä½¿ç”¨ Publish æ­å»ºé™æ€åšå®¢</h1><h2>Publish æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><a href="https://github.com/JohnSundell/Publish">Publish</a>æ˜¯ä¸€æ¬¾é™æ€ç½‘ç«™ç”Ÿæˆå™¨ã€‚å®ƒä½¿ç”¨Swiftæ„å»ºæ•´ä¸ªç½‘ç«™ï¼Œå¹¶æ”¯æŒä¸»é¢˜ã€æ’ä»¶å’Œå…¶ä»–å¤§é‡çš„å®šåˆ¶é€‰é¡¹ã€‚</p><h2>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Publish</h2><p>æ¥è§¦åˆ°Publishæ˜¯å› ä¸ºå®ƒçš„ä½œè€…John Sundellï¼ŒJohn Sundell æ˜¯å›½å¤–Swifté¢†åŸŸçš„æŠ€æœ¯å¤§ç‰›ï¼Œå‘è¡¨äº†å¤§é‡é«˜è´¨é‡çš„æŠ€æœ¯æ–‡ç« ï¼Œç¬”è€…ä¹Ÿä»ä¸­å—ç›ŠåŒªæµ…ï¼Œä»–çš„æ–‡ç« å‘å¸ƒåœ¨ <a href="https://www.swiftbysundell.com/">Swift by Sundell</a>ã€‚è¿™ä¸ªç«™ç‚¹æ­£æ˜¯ä½¿ç”¨ä»–äº²æ‰‹å¼€å‘çš„Publishæ¡†æ¶æ¥æ„å»ºçš„ã€‚</p><p>Publishæœ€å¸å¼•æˆ‘çš„åœ°æ–¹æ˜¯æ•´ä¸ªæ¡†æ¶å…¨éƒ¨ç”±Swiftè¿›è¡Œæ„å»ºï¼ŒSwiftè¯­è¨€æ˜¯æˆ‘ç›®å‰ä¸»åŠ›å¼€å‘è¯­è¨€ï¼Œæ‰€ä»¥Publishè®©æˆ‘æ„Ÿåˆ°éå¸¸äº²åˆ‡ï¼Œå¯¹ç«™ç‚¹çš„å®šåˆ¶åŒ–éœ€æ±‚ä¹Ÿä¼šæ›´å¾—å¿ƒåº”æ‰‹ï¼Œè¿™ç§å®Œå…¨è‡ªå·±æŒæ§çš„æ„Ÿè§‰å¤ªå¥½äº†ã€‚</p><h2>å¦‚ä½•ä½¿ç”¨ Publish</h2><h3>å®‰è£…</h3><p>åŒå¤§é‡çš„å…¶ä»–é™æ€ç½‘ç«™ç”Ÿæˆå™¨ä¸€æ ·ï¼ŒPublishæä¾›äº†CLIã€‚é€šè¿‡å‘½ä»¤è¡Œå¿«é€Ÿå®Œæˆåˆ›å»ºæ¨¡æ¿ã€å†…å®¹æ›´æ–°ã€è¿œç¨‹å‘å¸ƒç­‰ä¸€ç³»åˆ—æ“ä½œ å®‰è£…æ–¹å¼å¯ä»¥é€šè¿‡ brew å®‰è£…ä¹Ÿå¯ä»¥é€šè¿‡æºä»£ç å®‰è£…ï¼Œè¿™é‡Œä½¿ç”¨ brew å®‰è£… <code>brew install publish</code></p><h3>åˆ›å»ºç«™ç‚¹</h3><p>åˆ›å»ºä¸€ä¸ª Blog ç«™ç‚¹</p><pre><code>mkdir blog
cd blog
publish new
</code></pre><p>Publish ä¼šè‡ªåŠ¨åˆ›å»ºé¡¹ç›®æ¨¡ç‰ˆï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><pre><code>|-- blog
|   |-- <span class="type">Content</span>
|           |â€“â€“ posts
|                 |â€“â€“ first-post.<span class="property">md</span>
|                 |â€“â€“ index.<span class="property">md</span>
|           |â€“â€“ index.<span class="property">md</span>
|   |-- <span class="type">Resources</span>
|   |-- <span class="type">Sources</span>
|           |â€“â€“ blog
|                  |â€“â€“ main.<span class="property">swift</span>
</code></pre><p>Contentç›®å½•å­˜æ”¾markdownæºæ–‡ä»¶ Resourceç›®å½•å­˜æ”¾èµ„æºæ–‡ä»¶ï¼Œæ¯”å¦‚css å›¾ç‰‡ç­‰ Sourceç›®å½•å­˜æ”¾æ„å»ºç½‘ç«™çš„æºä»£ç æ–‡ä»¶ï¼Œæ¯”å¦‚main.swifté‡Œå®šä¹‰äº†ç«™ç‚¹çš„æ¡†æ¶ç»“æ„ã€ä¸»é¢˜é€‰æ‹©ä»¥åŠç«™ç‚¹ç”Ÿæˆçš„å„ç§å·¥ä½œæµï¼Œå½“ç„¶å¯ä»¥åœ¨è¿™ä¸ªç›®å½•é‡Œåšå„ç§æ‰©å±•æ“ä½œï¼Œæ¯”å¦‚è‡ªå®šä¹‰ä¸€ä¸ªæ’ä»¶ã€ä¸»é¢˜ç­‰</p><h3>è¿è¡Œå’Œè°ƒè¯•</h3><p>Swiftæ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼Œä»£ç æ¯æ¬¡ä¿®æ”¹ä¹‹åï¼Œéƒ½éœ€åœ¨æœ¬æœºç¼–è¯‘å¹¶è¿è¡Œ</p><pre><code>publish run
</code></pre><p>ç¬¬ä¸€æ¬¡è¿è¡Œï¼ŒPublishä¼šè‡ªåŠ¨ä»Githubä¸Šè·å–ä¾èµ–çš„ä¸‰æ–¹åº“ï¼Œç„¶åä¼šçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯</p><pre><code>publish run
...
<span class="type">Publishing</span> blog (<span class="number">6</span> steps)
[<span class="number">1</span>/<span class="number">6</span>] <span class="type">Copy</span> '<span class="type">Resources</span>' files
[<span class="number">2</span>/<span class="number">6</span>] <span class="type">Add Markdown</span> files from '<span class="type">Content</span>' folder
[<span class="number">3</span>/<span class="number">6</span>] <span class="type">Sort</span> items
[<span class="number">4</span>/<span class="number">6</span>] <span class="type">Generate HTML</span>
[<span class="number">5</span>/<span class="number">6</span>] <span class="type">Generate RSS</span> feed
[<span class="number">6</span>/<span class="number">6</span>] <span class="type">Generate</span> site map
âœ… <span class="type">Successfully</span> published blog
ğŸŒ <span class="type">Starting</span> web server at http://localhost:<span class="number">8000</span>

<span class="type">Press ENTER</span> to stop the server and exit
</code></pre><p>ç”¨æµè§ˆå™¨è®¿é—® http://localhost:8000 å°±å¯ä»¥çœ‹åˆ°æ–°ç«™ç‚¹äº†ï¼Œç½‘ç«™çš„æ‰€æœ‰å†…å®¹æ”¾ç½®åœ¨äº†Outputç›®å½•ã€‚ å¦‚æœè¦å‘å¸ƒåˆ° github pageï¼Œåªéœ€è¦æ·»åŠ  <code>.deploy(using: .gitHub("username/username.github.io"))</code> <em>usernameä¸ºgithubçš„ç”¨æˆ·å</em>ï¼Œç„¶åæ‰§è¡Œ</p><pre><code>publish deploy
</code></pre><p>ä¾¿å¯å°†å†…å®¹å‘å¸ƒä¸Šå»ï¼Œè¿™ä¸ªæ¡†æ¶çš„ä»‹ç»å’Œä½¿ç”¨å°±è¯´åˆ°è¿™é‡Œï¼Œå…³äºPublishä¸­æ¶‰åŠçš„æ¦‚å¿µä»¥åŠå¦‚ä½•å®šåˆ¶åŒ–åé¢ä¼šä¸“é—¨è®²è§£</p><h3>æ„Ÿæƒ³</h3><p>æ–‡ç« æœ€åè¯´è¯´ç¬”è€…çš„ä¸€äº›æ„Ÿæƒ³å§ï¼Œæˆ‘ä»2012å¹´ç¬¬ä¸€æ¬¡ç”¨ JekyII æ¥æ­å»ºçš„æˆ‘çš„åšå®¢ï¼Œè½¬çœ¼é—´ä¹å¹´è¿‡å»äº†ï¼Œè¿™æœŸé—´æˆ‘æ›´æ¢è¿‡å¾ˆå¤šæ¡†æ¶ ä»<code>JekyII</code> <code>hexo</code> <code>hugo</code> <code>vuepress</code> åˆ°ç°åœ¨çš„ <code>Publish</code>ï¼Œçˆ±æŠ˜è…¾æ˜¯ç¨‹åºçŒ¿çš„å¤©æ€§ï¼Œä½†æ˜¯æ­å»ºç«™ç‚¹åªæ˜¯æä¾›ä¸€ä¸ªå†™ä½œå¹³å°ï¼ŒæŒç»­è¾“å‡ºæœ‰ä»·å€¼çš„å†…å®¹ï¼Œèƒ½å¤Ÿå¸®åŠ©å½±å“åˆ°ä»–äººï¼Œè¿™æ‰æ˜¯æœ€é‡è¦çš„ï¼Œæˆ‘ä»¬ä¸€èµ·å…±å‹‰ã€‚</p>]]></content:encoded></item><item><guid isPermaLink="true">https://your-website-url.com/posts/website-use-hugo</guid><title>ä½¿ç”¨ Hugo + Travis CI + Github Pages æ­å»ºé™æ€åšå®¢</title><description>æ­å»ºé™æ€åšå®¢çš„æ¡†æ¶æœ‰å¾ˆå¤šï¼Œè¿™æ¬¡å°è¯•ä¸‹Hugoï¼Œå¹¶æ­é…CIè®©ä½ ä½“éªŒå‡çº§ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§</description><link>https://your-website-url.com/posts/website-use-hugo</link><pubDate>Mon, 16 Jul 2018 20:04:00 +0800</pubDate><content:encoded><![CDATA[<h1>ä½¿ç”¨ Hugo + Travis CI + Github Pages æ­å»ºé™æ€åšå®¢</h1><p>æœ€è¿‘èŠ±äº†ç‚¹æ—¶é—´æŠŠå‡ å¹´å‰æ­å»ºçš„åšå®¢è¿›è¡Œäº†é‡å»ºï¼Œé‡å»ºä¹‹åçš„æ„Ÿè§‰ç®€ç›´çˆ½æäº†ï¼Œå°±å¥½åƒè£…ä¿®å®Œçš„æ–°å®¶ä¸€æ ·è®©äººèµå¿ƒæ‚¦ç›®ï¼ŒåŒæ—¶æœ‰å¼ºå¤§çš„ Travis CI åŠ æŒï¼Œå°±å¥½åƒèº«è¾¹æœ‰ä¸€ä½è´´å¿ƒçš„ç®¡å®¶ï¼Œå¹¸ç¦æŒ‡æ•°ä¸Šå‡äº†ä¸€ä¸ªé«˜åº¦ã€‚ä¸‹é¢æ­¥å…¥æ­£é¢˜</p><h2>Hugo ä»‹ç»</h2><p>ç›®å‰æ­å»ºé™æ€åšå®¢çš„å·¥å…·æœ‰å¾ˆå¤šï¼Œæœ‰äººä¸“é—¨æ•´ç†äº†ä¸€ä¸ª <a href="https://www.staticgen.com">åˆ—è¡¨</a> å¯ä»¥äº†è§£ä¸‹ï¼Œè¿™é‡Œç®€å•è¯´ä¸€ä¸‹ <strong>Hugo</strong>ï¼Œ å®ƒæ˜¯ä¸€ç§å¼€æºçš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨æ¡†æ¶ã€‚ä½•ä¸ºé™æ€ç«™ç‚¹ç”Ÿæˆå™¨å‘¢ï¼Ÿå°±æ˜¯è¯´åŸºäºç®€å•çš„æ–‡æœ¬å†…å®¹å³å¯ç”Ÿæˆå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨è®¿é—®çš„ html ç½‘é¡µï¼Œå¯¹äº Hugo æ¥è¯´ï¼Œæ–‡æœ¬å†…å®¹å³é‡‡ç”¨ Markdown è¯­æ³•çš„ <strong>md</strong> æºæ–‡ä»¶ã€‚Hugo é‡‡ç”¨ GO è¯­è¨€ç¼–å†™ï¼Œæœ€çªå‡ºçš„ä¼˜ç‚¹å°±æ˜¯æ‰§è¡Œæ•ˆç‡é«˜ã€‚</p><h2>Travis CI ä»‹ç»</h2><p><a href="https://travis-ci.org">Travis CI</a> æ˜¯ä¸€ä¸ªæŒç»­é›†æˆæœåŠ¡ï¼Œç”¨äºæ„å»ºå’Œéƒ¨ç½²é¡¹ç›®ã€‚ä½•ä¸ºæŒç»­é›†æˆå‘¢ï¼Ÿå°±æ˜¯è¯´é¡¹ç›®ä»£ç åœ¨å‘ç”Ÿæ”¹åŠ¨çš„æ—¶å€™ä¼š<strong>è‡ªåŠ¨</strong>æ„å»ºå’Œéƒ¨ç½²ï¼Œç¡®ä¿é¡¹ç›®çš„æ­£å¸¸è¿è¡Œã€‚é’ˆå¯¹ Github ä¸Šçš„å¼€æºé¡¹ç›®ï¼ŒTravis CI æä¾›å…è´¹çš„æœåŠ¡ï¼Œä¸‹é¢å†è¯´ä¸€ä¸‹ Github Pagesã€‚</p><h2>Github Pages ä»‹ç»</h2><p><a href="https://pages.github.com">Github Pages</a> æ˜¯ Github æä¾›çš„å…è´¹çš„é™æ€ç½‘ç«™æ‰˜ç®¡æœåŠ¡ï¼Œç”¨èµ·æ¥æ–¹ä¾¿è€Œä¸”åŠŸèƒ½å¼ºå¤§ï¼Œä¸ä»…æ²¡æœ‰ç©ºé—´é™åˆ¶ï¼Œè¿˜å¯ä»¥ç»‘å®šè‡ªå·±çš„åŸŸåã€‚</p><p>ä¸‹é¢æ¥è¯´ä¸€ä¸‹ç”¨ Hugo é…åˆ Travis CI å’Œ Github Pages æ¥æ­å»ºåšå®¢çš„è¿‡ç¨‹</p><h2>æ­å»ºåšå®¢çš„æµç¨‹</h2><h3>#0 åœ¨ Github åˆ›å»ºä¸€ä¸ªç”¨äºæ‰˜ç®¡ç«™ç‚¹çš„ä»“åº“</h3><p>Hugo å®˜ç½‘æœ‰ä¸€ä¸ª <a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/">è¯´æ˜æ–‡æ¡£</a>ï¼Œé‡Œé¢æåˆ°äº†ä¸¤ç§æƒ…å†µï¼Œå¯¹åº”çš„ç½‘å€æœ‰äº›ä¸åŒã€‚</p><p><code>User/Organization Pages (https://&lt;USERNAME|ORGANIZATION&gt;.github.io/)</code><br><code>Project Pages (https://&lt;USERNAME|ORGANIZATION&gt;.github.io/&lt;PROJECT&gt;/)</code></p><p>ç¬”è€…é€‰æ‹©äº† <strong>Project Pages</strong>ï¼Œå› ä¸ºæ–‡æ¡£é‡Œè¯´ <strong>User/Organization Pages</strong> ç±»å‹åªèƒ½å°†ç«™ç‚¹å†…å®¹éƒ¨ç½²åˆ°ä¸»åˆ†æ”¯ï¼Œè€Œåé¢ çš„ Travis CI éƒ¨ç½²é»˜è®¤æ˜¯åœ¨ gh-pages åˆ†æ”¯ã€‚</p><h3>#1 ä½¿ç”¨ Hugo åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªç«™ç‚¹</h3><p>Hugo å®˜ç½‘ç»™å‡ºäº†ä¸€ä¸ªå¿«é€Ÿæ­å»ºçš„ <a href="https://gohugo.io/getting-started/quick-start/">æŒ‡å—</a>ï¼Œç›´æ¥æŒ‰ç…§æ­¤æ–‡æ¡£ä¸€æ­¥æ­¥æ“ä½œå³å¯ã€‚</p><h3>#2 å°†ç”Ÿæˆçš„æœ¬åœ°æ–‡ä»¶æ¨é€åˆ° Github ä»“åº“</h3><p>å¯ä»¥å‚è€ƒ <a href="https://help.github.com/articles/adding-an-existing-project-to-github-using-the-command-line/">è¿™é‡Œ</a> æ¥å®Œæˆæ­¤æ“ä½œ</p><h3>#3 åˆ›å»º Github Personal Access Token</h3><p>åœ¨ä¸‹é¢çš„æ­¥éª¤ä¸­ï¼Œéœ€è¦åœ¨ Travis é…ç½® Github çš„ Personal Access Tokenï¼Œå‚è€ƒ <a href="https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/">è¿™é‡Œ</a> æ¥å®Œæˆæ­¤æ“ä½œ</p><h3>#4 ç™»å½• Travis CI å¹¶å…³è”æŒ‡å®š Github ä»“åº“</h3><p>è®¿é—® <a href="https://travis-ci.com/">å®˜ç½‘</a>ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ <strong>Sign in with GitHub</strong>ï¼Œé€šè¿‡è¾“å…¥ Github å¯†ç æ¥å®Œæˆ Travis CI çš„ç™»å½•ï¼Œé€šè¿‡ Github çš„æˆæƒåï¼ŒTravis CI å³å¯è®¿é—® Github é‡Œçš„ä»“åº“ï¼Œç™»é™†è¿›å»çš„ç•Œé¢æ˜¯è¿™æ ·</p><img src="https://your-website-url.com/images/20190720055123.png"/><p>ç‚¹å‡» <strong>Activate</strong> æŒ‰é’®ï¼Œå¦‚å›¾ï¼Œé€‰æ‹©å¯¹åº”çš„ä»“åº“</p><img src="https://your-website-url.com/images/20190720055632.png"/><p>é€‰ä¸­ <strong>Only select repositories</strong>ï¼Œå¹¶åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰ä¸­å¯¹åº” repoï¼Œç„¶åç‚¹å‡» <strong>Approve &amp; Install</strong>ï¼Œé¡µé¢ä¼šè¿›è¡Œåˆ·æ–°ï¼Œå¦‚å›¾</p><img src="https://your-website-url.com/images/20190720055713.png"/><p>ç„¶åç‚¹å‡»å‡ºç°çš„ blog æ¡ç›®ï¼Œè¿›å…¥åè®¾ç½® Github Personal Access Tokenï¼Œå¦‚å›¾ <img src="https://your-website-url.com/images/20190720055829.png"/></p><h3>#5 é…ç½® Travis CI</h3><p>Travis CI æ˜¯é€šè¿‡ <strong>.travis.yml</strong> æ–‡ä»¶æ¥è¿›è¡Œé…ç½®çš„ã€‚é¦–å…ˆåœ¨æœ¬åœ°ç«™ç‚¹æ ¹ç›®å½•ä¸‹åˆ›å»º .travis.yml æ–‡ä»¶ï¼Œè¯¦ç»†çš„é…ç½®è¯´æ˜å¯ä»¥åœ¨ <a href="https://docs.travis-ci.com/user/customizing-the-build">è¿™é‡Œ</a> æŸ¥çœ‹ï¼Œæ¯”è¾ƒæ¬£å–œçš„æ˜¯ Travis å·²ç»æä¾›äº†å¯¹ Github Pages çš„éƒ¨ç½²æ”¯æŒï¼Œå¯ä»¥çœ‹ <a href="https://docs.travis-ci.com/user/deployment/pages/">è¿™é‡Œ</a>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯å…ˆæ‰§è¡Œ hugo å‘½ä»¤æ¥é‡æ–°ç”Ÿæˆç«™ç‚¹ï¼Œç„¶åè¿›è¡Œéƒ¨ç½²å³å¯ï¼Œæ•´ä¸ªè„šæœ¬å¦‚ä¸‹ï¼š</p><pre><code>install:
  - rm -rf <span class="keyword">public</span> || exit <span class="number">0</span>
# <span class="type">Build</span> the website
script:
  - binary/hugo
# <span class="type">Deploy</span> to <span class="type">GitHub</span> pages
deploy:
  provider: pages
  skip_cleanup: <span class="keyword">true</span>
  github_token: $GITHUB_TOKEN
  local_dir: <span class="keyword">public</span>
  on:
    branch: master
</code></pre><p>è¿™é‡Œé¢æœ‰å‡ ç‚¹è¿›è¡Œè¯´æ˜</p><ul><li>script éƒ¨åˆ†ï¼Œéœ€è¦æˆ‘ä»¬åˆ° hugo çš„ <a href="https://github.com/gohugoio/hugo/releases">ä¸‹è½½åœ°å€</a> é€‰æ‹© <strong>hugo<em>0.44</em>Linux-64bit.tar.gz</strong> è¿›è¡Œä¸‹è½½ï¼Œå¹¶è§£å‹ï¼Œå°†å…¶äºŒè¿›åˆ¶æ–‡ä»¶æ‹·è´åˆ°ä»“åº“æ ¹ç›®å½•ä¸‹çš„ binary æ–‡ä»¶å¤¹ä¸‹ï¼Œbinary å¦‚æœæ²¡æœ‰ï¼Œè‡ªå·±åˆ›å»ºä¸€ä¸ªã€‚</li><li>local_dir: è®¾ç½®ä¸º public æ˜¯å› ä¸ºåœ¨æ‰§è¡Œ hugo å‘½ä»¤æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆpublicç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶å³æœ€ç»ˆçš„ç«™ç‚¹æ–‡ä»¶ã€‚å¯¹ Github Pages éƒ¨ç½²çš„æ—¶å€™ä¹Ÿæ˜¯éƒ¨ç½²çš„è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ã€‚ç”±äºæ¯æ¬¡éƒ¨ç½²è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶éƒ½ä¼šé‡æ–°ç”Ÿæˆï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª .gitignore æ–‡ä»¶ï¼Œå¹¶å°† <code>public</code> æ·»åŠ è¿›å»ï¼Œè¿™æ ·å°±ä¸ä¼šçº³å…¥gitçš„ç‰ˆæœ¬ç®¡ç†èŒƒç•´ã€‚æ¥ä¸‹æ¥åœ¨ä»“åº“æ ¹ç›®å½•ä¸‹æ‰§è¡Œ</li></ul><pre><code>git add .
git commit -m <span class="string">"config travis.ci"</span>
git push -u origin master
</code></pre><p>å½“ push æˆåŠŸåï¼Œå°±ä¼šå¯åŠ¨ Travis çš„ CI è„šæœ¬ï¼Œè¿›å…¥ Travis çš„ç½‘é¡µæ§åˆ¶å°çœ‹ä¸€ä¸‹ï¼Œå¦‚å›¾</p><img src="https://your-website-url.com/images/20190720060654.png"/><p>è¿™è¯´æ˜è„šæœ¬å·²ç»æ„å»ºæˆåŠŸäº†ï¼Œæ­¤æ—¶ travis ä¼šè‡ªåŠ¨åœ¨ github çš„ blog ä»“åº“ä¸‹åˆ›å»ºäº†ä¸€ä¸ª gh-pages åˆ†æ”¯ï¼Œå¹¶å°† public ç›®å½•ä¸‹çš„ä»£ç æäº¤åˆ°äº†è¯¥åˆ†æ”¯ï¼Œå¦‚å›¾</p><img src="https://your-website-url.com/images/20190720060847.png"/><h3>#6 é…ç½® Github Pages</h3><p>ä¸‹é¢å›åˆ° githubï¼Œåœ¨ä»“åº“çš„ Settings é€‰é¡¹ä¸‹ï¼Œæ‰¾åˆ° Github Pages è®¾ç½®ï¼Œå¦‚å›¾</p><img src="https://your-website-url.com/images/20190720061545.png"/><p>ï¼Œå…¶ä¸­ Source ä¼šé»˜è®¤é…ç½®æˆ <strong>gh-pages branch</strong>ï¼Œä¸‹é¢å¯ä»¥è®¾ç½®è‡ªå®šä¹‰åŸŸåï¼Œè‡ªå®šä¹‰åŸŸåä¹‹åå†è¯´ã€‚</p><h2>éªŒæ”¶æˆæœ</h2><p>å¥½äº†ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå·¥ä½œåŸºæœ¬ä¸Šå°±å®Œæˆäº†ï¼Œé‚£ä¹ˆæ¯æ¬¡å†™åšå®¢çš„æµç¨‹æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿ</p><pre><code>hugo new post/xxx.<span class="property">md</span>
git add .
git commit -m <span class="string">"xxx"</span>
git push -u origin master
</code></pre><p>è¿™å°±å¯ä»¥äº†ï¼Œåšå®¢çš„æ„å»ºå’Œéƒ¨ç½²ç›´æ¥äº¤ç»™äº† Travis CI æ¥å®Œæˆï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Ÿå°±åˆ°è¿™é‡Œï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©</p>]]></content:encoded></item><item><guid isPermaLink="true">https://your-website-url.com/posts/gitlab-tutorial</guid><title>ä½¿ç”¨ gitlab æ­å»ºä»£ç æ‰˜ç®¡å¹³å°</title><description>å¼€å‘å›¢é˜Ÿä¸­å¦‚ä½•æ›´å¥½çš„è¿›è¡Œä»£ç ç®¡ç†å’Œåä½œï¼Œå¦‚ä½•å…è´¹æ­å»ºä¸€å°ä»£ç æ‰˜ç®¡å¹³å°ï¼Œè¿™ç¯‡æ–‡ç« ä¼šç»™ä½ ç­”æ¡ˆ</description><link>https://your-website-url.com/posts/gitlab-tutorial</link><pubDate>Thu, 5 Mar 2015 23:03:00 +0800</pubDate><content:encoded><![CDATA[<h1>ä½¿ç”¨ gitlab æ­å»ºä»£ç æ‰˜ç®¡å¹³å°</h1><p><a href="https://github.com">github</a>æ˜¯ç›®å‰æœ€ä¸ºæµè¡Œçš„ä»£ç æ‰˜ç®¡å¹³å°ï¼Œå¾ˆå¤šè‘—åçš„å¼€æºé¡¹ç›®éƒ½åœ¨githubä¸Šè¿›è¡Œæ‰˜ç®¡ã€‚ä½†githubåªèƒ½å…è´¹æ‰˜ç®¡å…¬æœ‰é¡¹ç›®ï¼Œå¦‚æœè¦æ‰˜ç®¡ç§æœ‰é¡¹ç›®å°±è¦ç¼´çº³ä¸è²çš„è´¹ç”¨ã€‚è€Œä¸”githubæœåŠ¡å™¨åœ¨å›½å¤–ï¼Œå¾ˆéš¾ä¿è¯ç½‘ç»œçš„ç¨³å®šã€‚ä¸ºäº†ä¿è¯ä»£ç çš„å®‰å…¨å’Œå¯æ§ï¼Œå…¬å¸æ›´å€¾å‘äºè‡ªå»ºä»£ç æœåŠ¡å™¨ã€‚</p><h2>gitlabæ˜¯ä»€ä¹ˆ</h2><blockquote><p>Version Control on your Server like GitHub but Open Source</p></blockquote><p>ä¸€å¥è¯ï¼Œgitlabå°±æ˜¯githubçš„å¼€æºå®ç°ã€‚å®ƒçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>gitä»“åº“ç®¡ç†ï¼Œä»£ç å®¡æŸ¥ï¼Œé—®é¢˜è¿½è¸ªï¼Œæ´»åŠ¨ä¿¡æ¯ï¼Œç»´åŸºå’ŒæŒç»­é›†æˆã€‚</li><li>å®¹çº³25000+çš„ç”¨æˆ·ç¾¤åŒæ—¶åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šã€‚LDAP/ADç»„åŒæ­¥å’Œæ—¥å¿—å®¡è®¡ã€‚</li><li>ç¤¾åŒºé©±åŠ¨ï¼Œ700+è´¡çŒ®è€…ï¼Œæ£€æŸ¥å®Œå–„ä»£ç ï¼Œæ–¹ä¾¿é›†æˆã€‚</li><li>å¦‚æœä¸æƒ³æ‰‹åŠ¨æ­å»ºgitlabï¼Œå¯ä»¥çœ‹<a href="https://about.gitlab.com/pricing/#gitlab-com">è¿™é‡Œ</a></li></ul><h2>å¦‚ä½•æ­å»º</h2><h3>éƒ¨ç½²ç¯å¢ƒubuntu14.04 serverç‰ˆæ“ä½œç³»ç»Ÿ</h3><p>æˆ‘ä»¬å…¬å¸ä¸»æœºCPUæ˜¯32ä½çš„ï¼Œæ‰€ä»¥ä¸‹è½½32ä½çš„ubuntué•œåƒã€‚ä¸‹è½½åœ°å€åœ¨<a href="http://www.ubuntu.org.cn/download/server">è¿™é‡Œ</a>ï¼Œå®‰è£…è¿‡ç¨‹å°±ä¸è¯´äº†ï¼Œæˆ‘æ˜¯ç”¨å…‰é©±å¼•å¯¼å®‰è£…çš„ï¼Œå½“ç„¶ä¹Ÿæœ‰å…¶ä»–æ–¹æ³•ã€‚</p><h3>å®‰è£…openssh-server</h3><p>ä¸ºä»€ä¹ˆè¦å®‰è£…å®ƒå‘¢ï¼Ÿ<code>openssh-server</code>ä¸»è¦ç”¨äºå…¶ä»–ç»ˆç«¯è¿œç¨‹è¿æ¥æœåŠ¡å™¨ã€‚é»˜è®¤ubuntu14.04ç³»ç»Ÿåªæœ‰<code>openssh-client</code>ï¼Œè€Œ<code>openssh-server</code>éœ€è¦è‡ªå·±å®‰è£…ã€‚æ€ä¹ˆçœ‹ç³»ç»Ÿæœ‰æ²¡æœ‰å®‰è£…sshå‘¢ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤ï¼š<code>dpkg --list|grep ssh</code>ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œæ§åˆ¶å°ä¼šåˆ—å‡º<code>openssh-client</code>å’Œ<code>openssh-server</code>ï¼Œè¯´æ˜å·²ç»å®‰è£…äº†ï¼Œå¦‚æœæ²¡æœ‰<code>openssh-server</code>ï¼Œéœ€è¦é€šè¿‡å¦‚ä¸‹å‘½ä»¤å®‰è£…<code>sudo apt-get install openssh-server</code>ï¼Œç»“æœåœ¨å®‰è£…è¿™ä¸ªçš„æ—¶å€™æŠ¥é”™</p><pre><code><span class="type">Reading</span> package lists... <span class="type">Done
Building</span> dependency tree
<span class="type">Reading</span> state information... <span class="type">Done
Package</span> openssh-server <span class="keyword">is</span> not available,but <span class="keyword">is</span> referred to by another package. <span class="type">This</span> may mean that the package <span class="keyword">is</span> missing, has been obsoleted, is only available from another source
<span class="type">E</span>: <span class="type">Package</span> 'openssh-server' has no installation candidate
</code></pre><p>googleäº†ä¸€ä¸‹ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯æ›´æ–°åŒ…</p><pre><code>sudo apt-<span class="keyword">get</span> update
sudo apt-<span class="keyword">get</span> upgrade
</code></pre><p>ç»“æœåˆæŠ¥äº†å¦‚ä¸‹é”™è¯¯ï¼š</p><pre><code><span class="type">Reading</span> package lists... <span class="type">Done
Building</span> dependency tree
<span class="type">Reading</span> state information... <span class="type">Done
Some</span> packages could not be install.  <span class="type">This</span> may mean that you have requested an impossible situation or <span class="keyword">if</span> you are using the unstable distribution that <span class="keyword">some required</span> packages have not yet been created or been moved out of <span class="type">Incoming</span>.
<span class="type">The</span> following information may help to resolve the situation:

<span class="type">The</span> following packages have unmet dependencies:
openssh-server : <span class="type">Depends</span>: <span class="call">libwrap0</span>(&gt;= <span class="number">7.6</span>-<span class="number">4</span>~) but it <span class="keyword">is</span> not installable

<span class="type">Unable</span> to correct problems, you have held broken packages.
</code></pre><p>æ§åˆ¶å°æç¤ºçš„æ„æ€æ˜¯ï¼Œå®‰è£…<code>openssh-server</code>è¦ä¾èµ–<code>libwrap0</code>è¿™ä¸ªåº“ï¼Œäºæ˜¯æˆ‘å°±åˆæ‰§è¡Œäº†<code>sudo apt-get install libwrap0</code>ã€‚ç»“æœåˆæ‰“å°äº†ä¸€å †ç±»ä¼¼é”™è¯¯ï¼Œæç¤ºåˆè¦ä¾èµ–å…¶ä»–çš„åº“ï¼Œäºæ˜¯è§‰çš„ä¸å¯¹åŠ²äº†ï¼Œåˆgoogleäº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°äº†åŸå› ï¼Œæ˜¯å› ä¸ºåœ¨<code>sudo apt-get update</code>çš„æ—¶å€™æ²¡æœ‰updateå®Œå…¨ã€‚é‡åˆ°äº† <strong>"Hash sum mismatch"</strong> errorã€‚æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p><pre><code>sudo rm -rf /<span class="keyword">var</span>/lib/apt/lists<span class="comment">/*   //é¦–å…ˆæ¸…ç©º/var/lib/apt/lists/ç›®å½•ï¼Œç„¶åæ›´æ–°
sudo apt-get update</span>
</code></pre><p>ç„¶å<code>openssh-server</code>å°±é¡ºåˆ©å®‰è£…ä¸Šäº†ï¼Œç½‘ä¸Šè§£å†³æ–¹æ¡ˆåœ°å€åœ¨<a href="http://askubuntu.com/questions/575639/cant-get-anything-to-install-dependency-errors">è¿™é‡Œ</a>ã€‚ å¦‚ä½•åˆ¤æ–­sshserveræ˜¯å¦å¯åŠ¨äº†å‘¢ï¼Ÿ</p><pre><code>ps -e | grep ssh
</code></pre><p>å¦‚æœåªæœ‰<code>ssh-agent</code>ï¼Œé‚£è¯´æ˜<code>ssh-server</code>è¿˜æ²¡æœ‰å¯åŠ¨ï¼Œéœ€è¦</p><pre><code>/etc/<span class="keyword">init</span>.<span class="property">d</span>/ssh start
</code></pre><p><code>ssh-server</code>é…ç½®æ–‡ä»¶ä½äº<code>/ etc/ssh/sshd_config</code>ï¼Œåœ¨è¿™é‡Œå¯ä»¥å®šä¹‰SSHçš„æœåŠ¡ç«¯å£ï¼Œé»˜è®¤ç«¯å£æ˜¯22ï¼Œä½ å¯ä»¥è‡ªå·±å®šä¹‰æˆå…¶ä»–ç«¯å£å·ï¼Œå¦‚222ã€‚ç„¶åé‡å¯SSHæœåŠ¡ï¼š</p><pre><code>sudo /etc/<span class="keyword">init</span>.<span class="property">d</span>/ssh resart
</code></pre><p>ä¸€èˆ¬æƒ…å†µä¸‹ç”¨é»˜è®¤ç«¯å£å°±è¡Œï¼Œæ“ä½œå®Œæ¯•ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šé€šè¿‡sshè¿œç¨‹é“¾æ¥ä¸»æœºæœåŠ¡å™¨äº†ã€‚</p><h3>å®‰è£…gitlabåŒ…</h3><p>åœ¨å®‰è£…gitlabåŒ…çš„æ—¶å€™åˆé‡åˆ°ä¸ªéº»çƒ¦ï¼Œgitlabå®˜ç½‘çš„<a href="https://about.gitlab.com/downloads/">ä¸‹è½½é¡µé¢</a>æ ¹æœ¬æ²¡æœ‰æä¾›ä»»ä½•32ä½çš„åŒ…ï¼Œå…¨éƒ¨æ˜¯amd64ã€‚æˆ‘ç«‹é©¬éƒé—·äº†ï¼Œå¥½ä¸å®¹æ˜“åˆ°è¿™å„¿äº†ï¼Œéš¾é“è¿˜è¦æ¢å°64ä½çš„ä¸»æœºã€‚ä¸ºäº†ç»™å…¬å¸å°‘æ‰¾éº»çƒ¦ï¼Œæˆ‘è¿˜æ˜¯è‡ªå·±å…ˆæ‰¾æ‰¾æœ‰æ²¡æœ‰ä»€ä¹ˆworkaroundå§ï¼ŒåŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººï¼Œç»ˆäºæ‰¾åˆ°äº†ä¸€ä¸ªæ–¹æ¡ˆ<a href="https://bitnami.com/stack/gitlab">bitnami gitlab</a>ï¼Œæä¾›ä¸€é”®å¼å®‰è£…gitlabï¼Œæœ€ä¸»è¦æ”¯æŒ32ä½ï¼Œå¤ªæ£’äº†ï¼æ“ä½œå¾ˆç®€å•</p><p>ç¬¬ä¸€æ­¥ä¸‹è½½<a href="https://bitnami.com/stack/gitlab/installer">installer</a></p><pre><code>wget https://downloads.<span class="property">bitnami</span>.<span class="property">com</span>/files/stacks/gitlab/<span class="number">7.6.2</span>-<span class="number">0</span>/bitnami-gitlab-<span class="number">7.6.2</span>-<span class="number">0</span>-linux-installer.<span class="property">run</span>
</code></pre><p>ç¬¬äºŒæ­¥å®‰è£…installer</p><pre><code>chmod <span class="number">744</span> bitnami-gitlab-<span class="number">7.6.2</span>-<span class="number">0</span>-linux-installer.<span class="property">run</span> <span class="comment">//è¿™æ­¥å¾ˆå…³é”®ï¼Œå¦åˆ™æç¤º command not found</span>
./bitnami-gitlab-<span class="number">7.6.2</span>-<span class="number">0</span>-linux-installer.<span class="property">run</span>
</code></pre><p>æ¥ä¸‹æ¥å°±æ˜¯ä¸€æ­¥ä¸€æ­¥å®‰è£…äº†ï¼Œéœ€è¦é…ç½®å¾ˆå¤šä¿¡æ¯ï¼Œå…·ä½“é…ç½®è¯´æ˜å¯ä»¥çœ‹<a href="https://bitnami.com/stack/gitlab/README.txt">è¿™é‡Œ</a></p><p>ç­‰é…ç½®å®Œäº†ï¼Œæˆ‘åœ¨è‡ªå·±ç”µè„‘æµè§ˆå™¨è¾“å…¥ 192.168.30.196 ï¼Œç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿå•¦ï¼ŒgitlabæœåŠ¡å™¨è·‘èµ·æ¥äº†ã€‚è¾“å…¥ç”¨æˆ·åï¼Œå¯†ç å³å¯ç™»å½•ã€‚</p><h3>gitlabé‚®ä»¶ç³»ç»Ÿ</h3><p>gitlabå†…ç½®é‚®ä»¶ç³»ç»Ÿï¼Œè¿™æ ·ç”¨æˆ·åœ¨æ‰§è¡Œç›¸å…³æ“ä½œçš„æ—¶å€™ä¼šè‡ªåŠ¨å‘é‚®ä»¶æ¥é€šçŸ¥ç›¸å…³æˆå‘˜ã€‚ è¿™ä¸ªåŠŸèƒ½å¾ˆèµï¼Œä¸‹é¢è¯´ä¸€ä¸‹é…ç½®æµç¨‹ï¼š</p><p>1 é¦–å…ˆç”³è¯·ä¸€ä¸ªæ–°çš„é‚®ç®± <code>xxx@163.com</code>ã€‚</p><p>2 <code>sudo vi /opt/gitlab-7.6.2-0/apps/gitlab/htdocs/config/environments/production.rb</code></p><p>ä¿®æ”¹å¦‚ä¸‹ä¿¡æ¯ï¼š</p><pre><code>config.<span class="property">action_mailer</span>.<span class="property">smtp_settings</span> = {
:address =&gt; <span class="string">"smtp.qiye.163.com"</span>,
:port =&gt; <span class="string">"25"</span>,
:domain =&gt; <span class="string">"163.com"</span>,
:authentication =&gt; :plain,
:user_name =&gt; <span class="string">"xxx@163.com"</span>,
:password =&gt; <span class="string">"your password"</span>,
:enable_starttls_auto =&gt; <span class="keyword">false</span>
}
</code></pre><p>3 <code>sudo vi /opt/gitlab-7.6.2-0/apps/gitlab/htdocs/config/gitlab.yml</code></p><p>æ‰¾åˆ°<code>email_from:</code>è¿™ä¸€è¡Œï¼Œæ”¹æˆ <code>email_from: xxx@163.com</code></p><p>4 é‡å¯gitlabæœåŠ¡: <code>sudo /opt/gitlab-7.6.2-0/ctlscript.sh restart gitlab_sidekiq</code></p><h3>ä¿®æ”¹æœåŠ¡å™¨IPåœ°å€</h3><p>å¦‚æœå…¨éƒ¨æŒ‰ç…§é»˜è®¤é€‰é¡¹å®‰è£…ï¼Œåˆ›å»ºä¸€ä¸ªprojectï¼Œç”Ÿæˆçš„ä»“åº“åœ°å€æ˜¯è¿™æ ·çš„ï¼š<code>git@127.0.0.1:username/test.git</code>ï¼Œè¿™æ˜¾ç„¶ä¸å¯¹ï¼Œå› ä¸ºè¿™æ˜¯æœ¬æœºåœ°å€ï¼Œè€Œå¼€å‘äººå‘˜åš<code>git clone</code>æ“ä½œæ—¶ï¼Œæ˜¯åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šå®Œæˆçš„ï¼Œå¦‚ä½•é…ç½®æœåŠ¡å™¨IPåœ°å€ï¼Ÿ åœ¨gitlab.ymlè¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­å®šä½åˆ°<code>host:</code>ï¼Œè®¾ç½®IPå³å¯ ã€‚</p><p>sudo vi /opt/gitlab-7.6.2-0/apps/gitlab/htdocs/config/gitlab.yml</p><pre><code>## <span class="type">GitLab</span> settings
gitlab:
## <span class="type">Web</span> server settings (note: host <span class="keyword">is</span> the <span class="type">FQDN</span>, do not include http://)
host: <span class="number">192.168.30.196</span> <span class="comment">//æŠŠè¿™é‡Œæ”¹æˆæœåŠ¡å™¨ipå°±å¯ä»¥äº†</span>
port: <span class="number">80</span> # <span class="type">Set</span> to <span class="number">443</span> <span class="keyword">if</span> using <span class="type">HTTPS</span>, see installation.<span class="property">md#using</span>-https <span class="keyword">for</span> additional <span class="type">HTTPS</span> configuration details
</code></pre><p>é‡å¯gitlabæœåŠ¡: <code>sudo /opt/gitlab-7.6.2-0/ctlscript.sh restart gitlab_sidekiq</code></p><h3>è®¾ç½®gitlabå¼€æœºè‡ªå¯åŠ¨</h3><p>é™¤äº†è¿™äº›è¿˜æœ‰ä»€ä¹ˆéœ€è¦åšå—ï¼Ÿé‚£å°±æ˜¯å¼€æœºè‡ªå¯åŠ¨ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æœåŠ¡å™¨å› ä¸ºå„ç§åŸå› é‡å¯åï¼ŒgitlabæœåŠ¡æŒç»­å¯ç”¨ã€‚</p><pre><code>sudo cp /opt/gitlab-<span class="number">7.6.2</span>-<span class="number">0</span>/ctlscript.<span class="property">sh</span> /etc/<span class="keyword">init</span>.<span class="property">d</span>/bitnami-gitlab
sudo update-rc.<span class="property">d</span> -f bitnami-gitlab start <span class="number">80 2 3 4 5</span> . <span class="property">stop</span> <span class="number">30 0 1 6</span> .
</code></pre>]]></content:encoded></item></channel></rss>